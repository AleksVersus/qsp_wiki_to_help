<!DOCTYPE html>
<html lang="ru" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Переменные [Документация QSP]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,variables"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Документация QSP"/>
<link rel="start" href="/"/>
<link rel="contents" href="/help:variables?do=index" title="Все страницы"/>
<link rel="alternate" type="application/rss+xml" title="Недавние изменения" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Текущее пространство имён" href="/feed.php?mode=list&amp;ns=help"/>
<link rel="alternate" type="text/html" title="Простой HTML" href="/_export/xhtml/help:variables"/>
<link rel="alternate" type="text/plain" title="вики-разметка" href="/_export/raw/help:variables"/>
<link rel="canonical" href="https://wiki.qsp.org/help:variables"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=qspdokuwiki&amp;tseed=f799b71f6ad814a2c02470a4d20f4250"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shCore.css"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shThemeDefault.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='help';var JSINFO = {"id":"help:variables","namespace":"help"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?tseed=f799b71f6ad814a2c02470a4d20f4250&amp;template=qspdokuwiki"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/NS = "help";var toolbar = [{"type":"format","title":"\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439","icon":"bold.png","key":"b","open":"**","close":"**","block":false},{"type":"format","title":"\u041a\u0443\u0440\u0441\u0438\u0432","icon":"italic.png","key":"i","open":"\/\/","close":"\/\/","block":false},{"type":"format","title":"\u041f\u043e\u0434\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439","icon":"underline.png","key":"u","open":"__","close":"__","block":false},{"type":"format","title":"\u0422\u0435\u043a\u0441\u0442 \u043a\u043e\u0434\u0430","icon":"mono.png","key":"m","open":"''","close":"''","block":false},{"type":"format","title":"\u0417\u0430\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439","icon":"strike.png","key":"d","open":"<del>","close":"<\/del>","block":false},{"type":"autohead","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"hequal.png","key":"8","text":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","mod":0,"block":true},{"type":"autohead","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0431\u043e\u043b\u0435\u0435 \u043d\u0438\u0437\u043a\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f (\u043f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a)","icon":"hminus.png","key":"9","text":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","mod":1,"block":true},{"type":"autohead","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"hplus.png","key":"0","text":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","mod":-1,"block":true},{"type":"picker","title":"\u0412\u044b\u0431\u043e\u0440 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430","icon":"h.png","class":"pk_hl","list":[{"type":"format","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 1-\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"h1.png","key":"1","open":"====== ","close":" ======\\n"},{"type":"format","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2-\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"h2.png","key":"2","open":"===== ","close":" =====\\n"},{"type":"format","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 3-\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"h3.png","key":"3","open":"==== ","close":" ====\\n"},{"type":"format","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 4-\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"h4.png","key":"4","open":"=== ","close":" ===\\n"},{"type":"format","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 5-\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f","icon":"h5.png","key":"5","open":"== ","close":" ==\\n"}],"block":true},{"type":"format","title":"\u0412\u043d\u0435\u0448\u043d\u044f\u044f \u0441\u0441\u044b\u043b\u043a\u0430","icon":"linkextern.png","open":"[[","close":"]]","sample":"http:\/\/example.com|\u0412\u043d\u0435\u0448\u043d\u044f\u044f \u0441\u0441\u044b\u043b\u043a\u0430","block":false},{"type":"formatln","title":"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430","icon":"ol.png","open":"  - ","close":"","key":"-","block":true},{"type":"formatln","title":"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043d\u0435\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430","icon":"ul.png","open":"  * ","close":"","key":".","block":true},{"type":"insert","title":"\u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c","icon":"hr.png","insert":"\\n----\\n","block":true},{"type":"picker","title":"\u0421\u043c\u0430\u0439\u043b\u0438\u043a\u0438","icon":"smiley.png","list":{"8-)":"icon_cool.gif","8-O":"icon_eek.gif","8-o":"icon_eek.gif",":-(":"icon_sad.gif",":-)":"icon_smile.gif","=)":"icon_smile2.gif",":-\/":"icon_doubt.gif",":-\\":"icon_doubt2.gif",":-?":"icon_confused.gif",":-D":"icon_biggrin.gif",":-P":"icon_razz.gif",":-o":"icon_surprised.gif",":-O":"icon_surprised.gif",":-x":"icon_silenced.gif",":-X":"icon_silenced.gif",":-|":"icon_neutral.gif",";-)":"icon_wink.gif","m(":"facepalm.gif","^_^":"icon_fun.gif",":?:":"icon_question.gif",":!:":"icon_exclaim.gif","LOL":"icon_lol.gif","FIXME":"fixme.gif","DELETEME":"delete.gif"},"icobase":"smileys","block":false},{"type":"picker","title":"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b","icon":"chars.png","list":["\u00c0","\u00e0","\u00c1","\u00e1","\u00c2","\u00e2","\u00c3","\u00e3","\u00c4","\u00e4","\u01cd","\u01ce","\u0102","\u0103","\u00c5","\u00e5","\u0100","\u0101","\u0104","\u0105","\u00c6","\u00e6","\u0106","\u0107","\u00c7","\u00e7","\u010c","\u010d","\u0108","\u0109","\u010a","\u010b","\u00d0","\u0111","\u00f0","\u010e","\u010f","\u00c8","\u00e8","\u00c9","\u00e9","\u00ca","\u00ea","\u00cb","\u00eb","\u011a","\u011b","\u0112","\u0113","\u0116","\u0117","\u0118","\u0119","\u0122","\u0123","\u011c","\u011d","\u011e","\u011f","\u0120","\u0121","\u0124","\u0125","\u00cc","\u00ec","\u00cd","\u00ed","\u00ce","\u00ee","\u00cf","\u00ef","\u01cf","\u01d0","\u012a","\u012b","\u0130","\u0131","\u012e","\u012f","\u0134","\u0135","\u0136","\u0137","\u0139","\u013a","\u013b","\u013c","\u013d","\u013e","\u0141","\u0142","\u013f","\u0140","\u0143","\u0144","\u00d1","\u00f1","\u0145","\u0146","\u0147","\u0148","\u00d2","\u00f2","\u00d3","\u00f3","\u00d4","\u00f4","\u00d5","\u00f5","\u00d6","\u00f6","\u01d1","\u01d2","\u014c","\u014d","\u0150","\u0151","\u0152","\u0153","\u00d8","\u00f8","\u0154","\u0155","\u0156","\u0157","\u0158","\u0159","\u015a","\u015b","\u015e","\u015f","\u0160","\u0161","\u015c","\u015d","\u0162","\u0163","\u0164","\u0165","\u00d9","\u00f9","\u00da","\u00fa","\u00db","\u00fb","\u00dc","\u00fc","\u01d3","\u01d4","\u016c","\u016d","\u016a","\u016b","\u016e","\u016f","\u01d6","\u01d8","\u01da","\u01dc","\u0172","\u0173","\u0170","\u0171","\u0174","\u0175","\u00dd","\u00fd","\u0178","\u00ff","\u0176","\u0177","\u0179","\u017a","\u017d","\u017e","\u017b","\u017c","\u00de","\u00fe","\u00df","\u0126","\u0127","\u00bf","\u00a1","\u00a2","\u00a3","\u00a4","\u00a5","\u20ac","\u00a6","\u00a7","\u00aa","\u00ac","\u00af","\u00b0","\u00b1","\u00f7","\u2030","\u00bc","\u00bd","\u00be","\u00b9","\u00b2","\u00b3","\u00b5","\u00b6","\u2020","\u2021","\u00b7","\u2022","\u00ba","\u2200","\u2202","\u2203","\u018f","\u0259","\u2205","\u2207","\u2208","\u2209","\u220b","\u220f","\u2211","\u203e","\u2212","\u2217","\u00d7","\u2044","\u221a","\u221d","\u221e","\u2220","\u2227","\u2228","\u2229","\u222a","\u222b","\u2234","\u223c","\u2245","\u2248","\u2260","\u2261","\u2264","\u2265","\u2282","\u2283","\u2284","\u2286","\u2287","\u2295","\u2297","\u22a5","\u22c5","\u25ca","\u2118","\u2111","\u211c","\u2135","\u2660","\u2663","\u2665","\u2666","\u03b1","\u03b2","\u0393","\u03b3","\u0394","\u03b4","\u03b5","\u03b6","\u03b7","\u0398","\u03b8","\u03b9","\u03ba","\u039b","\u03bb","\u03bc","\u039e","\u03be","\u03a0","\u03c0","\u03c1","\u03a3","\u03c3","\u03a4","\u03c4","\u03c5","\u03a6","\u03c6","\u03c7","\u03a8","\u03c8","\u03a9","\u03c9","\u2605","\u2606","\u260e","\u261a","\u261b","\u261c","\u261d","\u261e","\u261f","\u2639","\u263a","\u2714","\u2718","\u201e","\u201c","\u201d","\u201a","\u2018","\u2019","\u00ab","\u00bb","\u2039","\u203a","\u2014","\u2013","\u2026","\u2190","\u2191","\u2192","\u2193","\u2194","\u21d0","\u21d1","\u21d2","\u21d3","\u21d4","\u00a9","\u2122","\u00ae","\u2032","\u2033","[","]","{","}","~","(",")","%","\u00a7","$","#","|","@"],"block":false}];

/*!]]>*/</script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shCore.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shAutoloader.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushXml.js"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="/lib/tpl/qspdokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/qspdokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_qspdokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">Перейти к содержанию</a></li>
        </ul>

        <h1><a href="/start"  accesskey="h" title="[H]"><img src="/_media/wiki:logo.png" width="147" height="74" alt="" /></a><a href="/start"  accesskey="h" title="[H]"><span>Документация QSP</span></a><div class='main-site-row'><a href="https://qsp.org" ><span>Сайт</span></a><a href="https://qsp.org/index.php?option=com_agora&Itemid=57" ><span>Форум</span></a></div></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">Инструменты пользователя</h3>
                <ul>
                    <li><a href="/help:variables?do=login&amp;sectok=3e6ff35dfd333a48df46ef95b66bb2d4"  class="action login" rel="nofollow" title="Войти">Войти</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Инструменты сайта</h3>
            <form action="/start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Поиск" class="button" title="Поиск" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="help:variables" /><select name="do" class="edit quickselect" title="Инструменты"><option value="">Инструменты</option><optgroup label="Инструменты страницы"><option value="edit">Показать исходный текст</option><option value="revisions">История страницы</option><option value="backlink">Ссылки сюда</option></optgroup><optgroup label="Инструменты сайта"><option value="recent">Недавние изменения</option><option value="media">Управление медиафайлами</option><option value="index">Все страницы</option></optgroup><optgroup label="Инструменты пользователя"><option value="login">Войти</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="/help:variables?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Недавние изменения [R]">Недавние изменения</a></li><li><a href="/help:variables?do=media&amp;ns=help"  class="action media" rel="nofollow" title="Управление медиафайлами">Управление медиафайлами</a></li><li><a href="/help:variables?do=index"  class="action index" accesskey="x" rel="nofollow" title="Все страницы [X]">Все страницы</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Вы посетили:</span> <span class="bcsep">•</span> <bdi><a href="/help:main"  class="breadcrumbs" title="help:main">Окно основного описания</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:classic_qsp"  class="breadcrumbs" title="help:classic_qsp">Особенности написания игр для классического плеера</a></bdi> <span class="bcsep">•</span> <bdi><a href="/howto:start"  class="breadcrumbs" title="howto:start">Как сделать</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:inputs"  class="breadcrumbs" title="help:inputs">Ввод текста игроком</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:locations"  class="breadcrumbs" title="help:locations">Локации</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:aeroqsp"  class="breadcrumbs" title="help:aeroqsp">AeroQSP</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:menu"  class="breadcrumbs" title="help:menu">Меню</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:analyzer"  class="breadcrumbs" title="help:analyzer">Анализатор кода QSP</a></bdi> <span class="bcsep">•</span> <bdi><a href="/help:qgen"  class="breadcrumbs" title="help:qgen">Quest Generator</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="/help:variables"  class="breadcrumbs" title="help:variables">Переменные</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad include group">
                    <h3 class="toggle">Боковая панель</h3>
                    <div class="content">
                                                                        <ul>
<li class="level1"><div class="li">  <strong><a href="/start" class="wikilink1" title="start">В начало</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:qsp" class="wikilink1" title="help:qsp">Что такое QSP?</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:locations" class="wikilink1" title="help:locations">Локации</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong>Вывод текста</strong></div>
<ul>
<li class="level2"><div class="li">  <a href="/help:main" class="wikilink1" title="help:main">Окно основного описания</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:stat" class="wikilink1" title="help:stat">Окно дополнительного описания</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:msgbox" class="wikilink1" title="help:msgbox">Окно сообщений</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:acts" class="wikilink1" title="help:acts">Действия</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:goto" class="wikilink1" title="help:goto">Переходы</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:objs" class="wikilink1" title="help:objs">Предметы (инвентарь)</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong>Программирование</strong></div>
<ul>
<li class="level2"><div class="li">  <a href="/help:principle" class="wikilink1" title="help:principle">Порядок работы интерпретатора</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:variables" class="wikilink1" title="help:variables">Переменные</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:expressions" class="wikilink1" title="help:expressions">Выражения</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:coding" class="wikilink1" title="help:coding">Программный код</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:cycle" class="wikilink1" title="help:cycle">Циклы</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:arrays" class="wikilink1" title="help:arrays">Массивы</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:strings" class="wikilink1" title="help:strings">Строки</a></div>
<ul>
<li class="level3"><div class="li">  <a href="/help:regexp" class="wikilink1" title="help:regexp">Регулярные выражения</a></div>
</li>
</ul>
</li>
<li class="level2"><div class="li">  <a href="/help:tuples" class="wikilink1" title="help:tuples">Кортежи</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:conditional" class="wikilink1" title="help:conditional">Условия</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:organizing" class="wikilink1" title="help:organizing">Пользовательские функции и процедуры</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:jump" class="wikilink1" title="help:jump">Переходы внутри локации</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:service_locations" class="wikilink1" title="help:service_locations">Служебные локации, события</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:dynamical" class="wikilink1" title="help:dynamical">Динамический код</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">  <strong>Оформление</strong></div>
<ul>
<li class="level2"><div class="li">  <a href="/help:menu" class="wikilink1" title="help:menu">Меню</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:sound" class="wikilink1" title="help:sound">Звук</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:graphics" class="wikilink1" title="help:graphics">Графика</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:interface" class="wikilink1" title="help:interface">Настройки интерфейса</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:html" class="wikilink1" title="help:html">HTML</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">  <strong>Расширенные возможности</strong></div>
<ul>
<li class="level2"><div class="li">  <a href="/help:inputs" class="wikilink1" title="help:inputs">Ввод текста игроком</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:modules" class="wikilink1" title="help:modules">Работа с файлами игр, модули</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:savegame" class="wikilink1" title="help:savegame">Работа с файлами сохранений</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:realtime" class="wikilink1" title="help:realtime">Реальное время</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">  <strong>Нюансы написания игр под разные плееры</strong></div>
<ul>
<li class="level2"><div class="li">  <a href="/help:classic_qsp" class="wikilink1" title="help:classic_qsp">Классический плеер</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:qspider" class="wikilink1" title="help:qspider">qSpider</a></div>
<ul>
<li class="level3"><div class="li"> <a href="/help:qspider_gamecfg" class="wikilink1" title="help:qspider_gamecfg">Конфигурационный файл</a></div>
</li>
<li class="level3"><div class="li"> <a href="/help:qspider_aeroqsp" class="wikilink1" title="help:qspider_aeroqsp">Особенности запуска AeroQSP-игр</a></div>
</li>
<li class="level3"><div class="li"> <a href="/help:qspider_interface" class="wikilink1" title="help:qspider_interface">Взаимодействие с интерфейсом</a></div>
</li>
<li class="level3"><div class="li"> <a href="/help:qspider_themes" class="wikilink1" title="help:qspider_themes">Темы оформления</a></div>
</li>
<li class="level3"><div class="li"> <a href="/help:qspider_spectags" class="wikilink1" title="help:qspider_spectags">Специальные теги</a></div>
</li>
<li class="level3"><div class="li"> <a href="/help:qspider_inclib" class="wikilink1" title="help:qspider_inclib">Встроенная библиотека</a></div>
</li>
<li class="level3"><div class="li"> <a href="/help:qspider_standalone" class="wikilink2" title="help:qspider_standalone" rel="nofollow">Стандалон-сборка</a></div>
</li>
</ul>
</li>
<li class="level2"><div class="li">  x <a href="/help:navigator" class="wikilink1" title="help:navigator">Quest Navigator</a></div>
</li>
<li class="level2"><div class="li">  x <a href="/help:aeroqsp" class="wikilink1" title="help:aeroqsp">AeroQSP</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">  <strong>Утилиты и средства разработки</strong></div>
<ul>
<li class="level2"><div class="li">  <a href="/help:qgen" class="wikilink1" title="help:qgen">Quest Generator</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:debugger" class="wikilink1" title="help:debugger">Отладчик</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:txt2gam" class="wikilink1" title="help:txt2gam">Работа с утилитой TXT2GAM</a></div>
</li>
<li class="level2"><div class="li">  <a href="/help:analyzer" class="wikilink1" title="help:analyzer">Анализатор кода QSP</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:limits" class="wikilink1" title="help:limits">Ограничения QSP</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/howto:start" class="wikilink1" title="howto:start">Как сделать?</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:glossary" class="wikilink1" title="help:glossary">Cловарь терминов</a></strong></div>
</li>
<li class="level1"><div class="li">  <strong><a href="/help:keywords" class="wikilink1" title="help:keywords">Ключевые слова. Указатель</a></strong></div>
</li>
</ul>
                                            </div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>help:variables</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Содержание</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#peremennye">Переменные</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#tipy_peremennyx">Типы переменных</a></div></li>
<li class="level2"><div class="li"><a href="#sozdanie_peremennyx_i_izmenenie_ix_znachenij">Создание переменных и изменение их значений</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#mnozhestvennoe_prisvaivanie">Множественное присваивание</a></div></li>
<li class="level3"><div class="li"><a href="#prisvaivanie_iz_kortezha_raspakovka">Присваивание из кортежа (распаковка)</a></div></li>
<li class="level3"><div class="li"><a href="#operatory_set_i_let">Операторы SET и LET</a></div></li>
<li class="level3"><div class="li"><a href="#izmenenie_tipa_peremennoj">Изменение типа переменной</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#naimenovanie_peremennyx">Наименование переменных</a></div></li>
<li class="level2"><div class="li"><a href="#udalenie_peremennyx">Удаление переменных</a></div></li>
<li class="level2"><div class="li"><a href="#proverka_suschestvovanija_peremennoj">Проверка существования переменной</a></div></li>
<li class="level2"><div class="li"><a href="#poluchenie_znachenij_iz_peremennyx">Получение значений из переменных</a></div></li>
<li class="level2"><div class="li"><a href="#lokalnye_peremennye">Локальные переменные</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#primery_naznachenija_lokalnyx_peremennyx">Примеры назначения локальных переменных</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#discussion__section">Обсуждение</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<p>
<a href="/help:principle" class="wikilink1" title="help:principle">Назад: Порядок работы интерпретатора</a>
</p>

<h1 class="sectionedit1" id="peremennye">Переменные</h1>
<div class="level1">

<p>
Иногда в процессе игры нам требуется на время сохранить какую-либо информацию. Например, герой срывает с дерева яблоки, и нам нужно куда-то &quot;записать&quot;, сколько яблок он сорвал. Или же в результате битвы погибает злодей, и нам нужно, чтобы плеер &quot;запомнил&quot;, что злодей погиб. Для таких вот &quot;записей&quot;, &quot;запоминаний&quot;, и существуют переменные.
</p>

<p>
<strong>Переменная</strong> - это именованная &quot;ячейка памяти&quot;. То есть это некий кусочек памяти в программе, которому мы назначаем имя.
</p>

<p>
Для удобства можно представлять переменную, как коробку, в которую мы что-нибудь &quot;складываем&quot;, например число, или фрагмент текста (или даже несколько значений одновременно - кортеж).
</p>

</div>

<h2 class="sectionedit2" id="tipy_peremennyx">Типы переменных</h2>
<div class="level2">

<p>
Память программ работает совсем не так, как наша, и &quot;запоминать&quot; они могут только определённого типа значения. <strong>QSP</strong> умеет &quot;запоминать&quot; только <strong>целочисленные</strong> (числовые) и <strong>строковые</strong> значения. Особняком можно отметить <strong>кортежи</strong>, которые позволяют упаковать в одну переменную сразу группу значений.
</p>

<p>
Поэтому и переменные в <strong>QSP</strong> делятся на три типа:
</p>
<ul>
<li class="level1"><div class="li"> Целочисленные</div>
</li>
<li class="level1"><div class="li"> Строковые</div>
</li>
<li class="level1"><div class="li"> Кортежи</div>
</li>
</ul>

<p>
<strong>В целочисленных переменных</strong> (иногда для краткости их называют просто числовыми) мы можем хранить только <strong>целые</strong> числа в пределах от -2147483648 до 2147483647.
</p>

<p>
Если мы не поместили никакого значения в целочисленную переменную, то считается, что она хранит значение <strong><code>0</code></strong>. Это <strong>значение по умолчанию</strong> для числовых переменных.
</p>

<p>
<strong>В строковых переменных</strong> (иногда их называют текстовыми переменными) мы можем хранить целые строки текста, и длина таких строк может доходить до двух Гигабайт. Строка не может превысить объём оперативной памяти.
</p>

<p>
Если мы не поместили никакого значения в строковую переменную, то считается, что она хранит пустую строку, т.е. строку совсем без символов. Это <strong>значение по умолчанию</strong> для строковых переменных.
</p>

<p>
<strong>В кортежах</strong> мы можем хранить сразу группу значений, причём это могут быть значения любого из трёх типов: числовые, строковые и другие кортежи. <strong>Не рекомендуется</strong> создавать очень большие кортежи, хотя теоретически кортежи могут быть <em>очень</em> большими. Если вам и правда понадобится <em>настолько</em> большой кортеж, примите во внимание, что как и со строкой, объём занимаемых кортежем данных не может превысить двух Гигабайт, или объёма оперативной памяти.
</p>

<p>
<strong>В переменной можно хранить значение только одного типа!</strong> Переменные <strong><code>%яблоко</code></strong>, <strong><code>$яблоко</code></strong> и <strong><code>яблоко</code></strong> — это одна и та же переменная, но с разным типом значения, которое в ней хранится.
</p>

</div>

<h2 class="sectionedit3" id="sozdanie_peremennyx_i_izmenenie_ix_znachenij">Создание переменных и изменение их значений</h2>
<div class="level2">

<p>
Чтобы создать переменную, мы должны задать ей значение. Это называется операцией <strong>присваивания</strong>.
</p>

<p>
Операция присваивания в <strong>QSP</strong> записывается так:
</p>
<ul>
<li class="level1"><div class="li"> сначала пишется имя переменной</div>
</li>
<li class="level1"><div class="li"> затем ставится знак <strong>равно</strong> (<strong>=</strong>)</div>
</li>
<li class="level1"><div class="li"> после знака <strong>равно</strong> пишется значение, которое мы хотим &quot;записать&quot; в переменную.</div>
</li>
</ul>

<p>
Примеры:
</p>

<p>
<pre class="brush: qsp">
! переменной яблоко присваивается число 23
яблоко=23

! переменной $скороговорка присваивается строка Ехал Грека Через Реку
$скороговорка = &#039;Ехал Грека Через Реку&#039;

! переменной %unit присваивается кортеж значений
%unit = [187, 94, &#039;steel&#039;, [0, 2]]
</pre>
</p>

<p>
Как видите, во всех трёх случаях сначала ставится имя переменной, потом знак равенства, а потом значение. Вместо значения можно написать название другой переменной, название функции, или даже целое выражение. Плеер автоматически вычислит <strong>значение</strong> из выражения, функции или переменной, и присвоит это <strong>значение</strong> переменной, стоящей слева от знака <strong>равно</strong>. Примеры:
</p>

<p>
<pre class="brush: qsp">
! присваиваем переменной значение другой переменной
$скороговорка_про_Греку = $скороговорка

! присваиваем переменной значение выражения
яблоко = яблоки_в_кармане + яблоки_в_лукошке + яблоки_у_Лёшки

! присваиваем переменной значение функции
случайное_число = rnd
$текущая_локация = $curloc
</pre>
</p>

<p>
Не путайте операцию присваивания, и операцию сравнения. Их запись похожа, но операция сравнения обычно следует за ключевыми словами <strong><code>IF</code></strong>, <strong><code>ELSEIF</code></strong> или <strong><code>WHILE</code></strong> и позволяет сравнивать одно значение с другим.
</p>

</div>

<h3 class="sectionedit4" id="mnozhestvennoe_prisvaivanie">Множественное присваивание</h3>
<div class="level3">

<p>
Вы можете одной командой присвоить значения сразу нескольким переменным (множественное присваивание). Для этого:
</p>
<ul>
<li class="level1"><div class="li"> сначала перечисляете через запятую несколько имён переменных</div>
</li>
<li class="level1"><div class="li"> затем ставите знак <strong>равно</strong> (<strong>=</strong>)</div>
</li>
<li class="level1"><div class="li"> после знака <strong>равно</strong> так же через запятую перечисляете значения, которые хотите назначить переменным.</div>
</li>
</ul>

<p>
Примеры:
</p>

<p>
<pre class="brush: qsp">
яблоки_в_кармане, яблоки_в_лукошке, яблоки_у_Лёшки = 58, 11, 19
$строка_1, $строка_2 = &#039;Ехал Грека Через Реку&#039;, &#039;Видит Грека В Реке Рак&#039;
$name, count = &#039;Старый меч&#039;, 2
</pre>
</p>

<p>
Во всех трёх командах слева от знака <strong>равно</strong> через запятую перечисляются переменные, которым мы присваиваем значения, а справа через запятую перечисляются значения, которые мы присваиваем переменным.
</p>

<p>
Вместо прямого указания значений можно присваивать значения других переменных, выражений, функций:
</p>

<p>
<pre class="brush: qsp">
! три переменные = три значения
red, green, blue = rand(0,255), rand(0,255), rand(0,255)
! две переменные = два значения
яблоки_в_кармане, яблоки_в_лукошке = яблоки_у_Лёшки, яблоки_на_дереве+15
</pre>
</p>

<p>
Присваивать значения одной командой очень удобно, если переменные близки по своему смыслу или назначению. Например, одной строкой можно задавать значения сразу нескольким системным переменным в начале игры:
</p>

<p>
<pre class="brush: qsp">
usehtml, debug, nosave = 1, 1, 1
bcolor, lcolor, fcolor = rgb(255,255,255), rgb(0,90,90), rgb(0,0,0)
</pre>
</p>

<p>
Благодаря возможности одновременно присваивать значения сразу нескольким переменным, можно менять местами данные в двух переменных, не прибегая к помощи третьей:
</p>

<p>
<pre class="brush: qsp">
! присваиваем пременным x и y значения 12 и 99
x, y = 12, 99
! меняем местами значения. Теперь в x находится число 99, а в y — 12
x, y = y, x
</pre>
</p>

<p>
<strong>Важно помнить!</strong> Слева от знака равенства должно быть столько же переменных, сколько справа значений. Число переменных, и число присваиваемых значений — должны совпадать. Такие записи неверны:
</p>

<p>
<pre class="brush: qsp">
! три переменные, а значения только два
raz, dva, tri = 24, 67
! одна переменная, и два значения
chetyre = 89, 21
</pre>
</p>

<p>
Так же в одной команде можно использовать лишь один оператор присваивания:
</p>

<p>
<pre class="brush: qsp">
! так неправильно:
raz = 24, dva = 67, tri = 89
! а вот так правильно
raz, dva, tri = 24, 67, 89
! и вот так правильно, потому что здесь три команды записаны в одну строку
raz = 24 &amp; dva = 67 &amp; tri = 89
</pre>
</p>

</div>

<h3 class="sectionedit5" id="prisvaivanie_iz_kortezha_raspakovka">Присваивание из кортежа (распаковка)</h3>
<div class="level3">

<p>
Поскольку кортежи содержат в себе сразу несколько значений, запись присваивания значений переменным из кортежа может показаться необычной:
</p>

<p>
<pre class="brush: qsp">
! %unit = [187, 94, &#039;steel&#039;, [0, 2]]
рост, вес, $материал, %координаты = %unit
</pre>
</p>

<p>
Как видите, здесь у нас слева четыре имени переменной, а справа только одно имя переменной-кортежа. Такое присваивание называется <strong>распаковкой</strong> — значения извлекаются из кортежа и помещаются в указанные переменные.
</p>

<p>
Точно так же распаковывается кортеж, даже не помещённый в переменную:
</p>

<p>
<pre class="brush: qsp">
рост, вес, $материал, %координаты = [187, 94, &#039;steel&#039;, [0, 2]]
</pre>
</p>

<p>
Такая запись мало чем отличается от множественного присваивания, поэтому внешние квадратные скобки не обязательны:
</p>

<p>
<pre class="brush: qsp">
рост, вес, $материал, %координаты = 187, 94, &#039;steel&#039;, [0, 2]
</pre>
</p>

<p>
Подробнее о работе с кортежами, читайте в <a href="/help:tuples" class="wikilink1" title="help:tuples">соответствующем разделе</a>.
</p>

</div>

<h3 class="sectionedit6" id="operatory_set_i_let">Операторы SET и LET</h3>
<div class="level3">

<p>
Из старых версий плеера перекочевали операторы <strong><code>SET</code></strong> и <strong><code>LET</code></strong>. Эти операторы явно указывают, что данная команда производит присваивание. Любой из этих операторов может быть поставлен перед операцией присваивания, это никак не влияет на работу переменных. В примере ниже все три варианта присваивания значения переменным равнозначны:
</p>

<p>
<pre class="brush: qsp">
SET golden_axe_damage = 120
LET golden_axe_damage = 120
golden_axe_damage = 120
</pre>
</p>

<p>
Точно так же, как и в операции присваивания без операторов <strong><code>SET</code></strong> и <strong><code>LET</code></strong>, можно присваивать значения сразу нескольким переменным одной командой и с использованием операторов:
</p>

<p>
<pre class="brush: qsp">
set яблоки_в_кармане, яблоки_в_лукошке, яблоки_у_Лёшки = 58, 11, 19
set $строка_1, $строка_2 = &#039;Ехал Грека Через Реку&#039;, &#039;Видит Грека В Реке Рак&#039;
let $name, count = &#039;Старый меч&#039;, 2
</pre>
</p>

<p>
Для улучшения читаемости кода можно использовать оператор <strong><code>SET</code></strong> только для команд с множественным присваиванием.
</p>

<p>
Оператор <strong><code>LET</code></strong> использовать не рекомендуется.
</p>

</div>

<h3 class="sectionedit7" id="izmenenie_tipa_peremennoj">Изменение типа переменной</h3>
<div class="level3">

<p>
Изменить тип переменной в <strong>QSP</strong> можно, просто присвоив ей значение другого типа. Например:
</p>

<p>
<pre class="brush: qsp">
! присваиваем переменной строковое значение
$яблоко = &#039;Антоновка&#039;
! если мы попытаемся вывести на экран числовое значение этой переменной,
! то увидим значение по умолчанию, то есть ноль:
*pl яблоко &amp; ! выведет 0 на экран
! но мы можем изменить тип переменной, записав в неё число
яблоко = 19
! теперь, если мы попытаемся вывести на экран то же числовое значение
! мы увидим число 19
*pl яблоко &amp; ! выведет 19 на экран
! а если мы попытаемся вывести на экран текстовое значение,
! то ничего не увидим, потому что числовое значение затёрло текстовое
*pl $яблоко
</pre>
</p>

</div>

<h2 class="sectionedit8" id="naimenovanie_peremennyx">Наименование переменных</h2>
<div class="level2">

<p>
Чтобы не сбивать плеер с толку, названия переменных должны соответствовать следующим условиям:
</p>
<ul>
<li class="level1"><div class="li"> Название переменной <strong>не</strong> должно <strong>начинаться с цифры</strong>.</div>
</li>
<li class="level1"><div class="li"> Оно не должно совпадать с ключевыми словами (cм. <a href="/help:keywords" class="wikilink1" title="help:keywords">список ключевых слов</a>).</div>
</li>
<li class="level1"><div class="li"> В названии не должны использоваться пробелы, символы табуляции и следующие символы: <pre class="brush: text">
     ! : &amp; = &lt; &gt; + - * / , &#039; &quot; ( ) [ ] { } @ ? ;
</pre></div>
</li>
<li class="level1"><div class="li"> Названия строковых переменных должны начинаться с символа <strong><code>$</code></strong>.</div>
</li>
<li class="level1"><div class="li"> Названия кортежей должны начинаться с символа <strong><code>%</code></strong>.</div>
</li>
<li class="level1"><div class="li"> Регистр в названии переменной не важен: <strong><code>деньги</code></strong> и <strong><code>ДеНьГи</code></strong> - одна и та же переменная.</div>
</li>
</ul>

<p>
А вот несколько рекомендаций по тому, как правильно подбирать названия переменных
</p>
<ul>
<li class="level1"><div class="li"> Вместо пробела в названиях можно использовать символ подчеркивания - &quot;<strong><code>_</code></strong>&quot;.</div>
</li>
<li class="level1"><div class="li"> Не рекомендуется делать названия длиннее 10-15 символов, это усложняет читаемость кода.</div>
</li>
<li class="level1"><div class="li"> Не стоит использовать в названии переменной <strong>одновременно</strong> символы разных алфавитов, это может запутать вас, и вы допустите ошибку.</div>
</li>
</ul>

<p>
Используйте краткие и ёмкие названия, указывающие на назначение переменной. При этом <strong>QSP</strong> разрешает пользоваться символами любого алфавита:
</p>

<p>
<pre class="brush: qsp">
яблоки_в_кармане = 3
$АмулетНаШее = &quot;Ожерелье Гроз&quot;

money_count = 1037
$money_name = &quot;RUB&quot;

我_拿_钥匙 = 1
%饭碗 = [&quot;Rice Bowl&quot;, &#039;Cat-wife &#039;]
</pre>
</p>

</div>

<h2 class="sectionedit9" id="udalenie_peremennyx">Удаление переменных</h2>
<div class="level2">

<p>
Удалить переменную можно с помощью оператора <strong><code>KILLVAR</code></strong>.
</p>

<p>
<pre class="brush: qsp">
KILLVAR &#039;имя_переменной&#039;
</pre>
</p>

<p>
Имя переменной при этом должно помещаться в кавычки:
</p>

<p>
<pre class="brush: qsp">
killvar &#039;яблоки_в_кармане&#039;
killvar &quot;$АмулетНаШее&quot;
</pre>
</p>

<p>
Более подробное описание оператора <strong><code>KILLVAR</code></strong> находится в статье про <a href="/help:arrays" class="wikilink1" title="help:arrays">массивы</a>.
</p>

</div>

<h2 class="sectionedit10" id="proverka_suschestvovanija_peremennoj">Проверка существования переменной</h2>
<div class="level2">

<p>
В <strong>QSP</strong> нет специальной команды для проверки существования переменных, однако в силу особенностей движка можно использовать функцию получения размера <a href="/help:arrays" class="wikilink1" title="help:arrays">массива</a> <strong><code>ARRSIZE</code></strong>. Если функция вернёт единицу <strong>1</strong>, значит переменная существует; если вернёт <strong>0</strong>, значит переменная не существует.
</p>

<p>
<pre class="brush: qsp">
яблоко = 19 &amp; ! создана переменная яблоко
! увидим на экране Переменная &quot;яблоко&quot; существует
if arrsize(&#039;яблоко&#039;) = 1:
    *pl &#039;Переменная &quot;яблоко&quot; существует&#039;
else
    *pl &#039;Переменная &quot;яблоко&quot; не существует&#039;
end

! переменную груша мы не создавали
! увидим на экране Переменная &quot;груша&quot; не существует
if arrsize(&#039;груша&#039;)=1:
    *pl &#039;Переменная &quot;груша&quot; существует&#039;
else
    *pl &#039;Переменная &quot;груша&quot; не существует&#039;
end
</pre>
</p>

<p>
Название переменной для функции <strong><code>ARRSIZE</code></strong> указывается внутри кавычек и помещается в круглые скобки. Указывать символ <code>$</code> или <code>%</code> перед названием переменной не обязательно. Вне зависимости от типа значения, которое в этой переменной хранится, <strong><code>ARRSIZE</code></strong> вернёт единицу, если переменная существует:
</p>

<p>
<pre class="brush: qsp">
яблоко = 19 &amp; ! в переменную записано число
! обе команды ниже вернут единицу, потому что
! яблоко, $яблоко и %яблоко - это одна и та же переменная
*pl arrsize(&#039;яблоко&#039;)
*pl arrsize(&#039;$яблоко&#039;)
*pl arrsize(&#039;%яблоко&#039;)
</pre>
</p>

<p>
О функции <strong><code>ARRSIZE</code></strong> так же можно подробнее почитать в разделе <a href="/help:arrays" class="wikilink1" title="help:arrays">&quot;Массивы&quot;</a>.
</p>

</div>

<h2 class="sectionedit11" id="poluchenie_znachenij_iz_peremennyx">Получение значений из переменных</h2>
<div class="level2">

<p>
Чтобы получить значение переменной, достаточно написать её имя в выражении.
</p>

<p>
При этом, чтобы получить кортеж, нужно поставить перед именем переменной <code>%</code>, а чтобы получить строковое значение, нужно поставить перед именем переменной <code>$</code>.
</p>

<p>
Примеры:
</p>

<p>
<pre class="brush: qsp">
! присваиваем значение одной переменной - другой
num = int &amp; ! выражение здесь состоит из одной переменной
! выводим значение переменной на экран
*pl $text &amp;! выражение состоит из одной переменной
! вычисляем куб числа, записанного в переменную и выводим на экран
d * d * d &amp;! выражение состоит из двух операций умножения
</pre>
</p>

<p>
<strong>Важно!</strong> Если мы пытаемся получить значение переменной, которая не была создана, то такая переменная вернёт значение по умолчанию:
</p>
<ul>
<li class="level1"><div class="li"> для числовых переменных значение по умолчанию <code>0</code> (ноль);</div>
</li>
<li class="level1"><div class="li"> для текстовых переменных значение по умолчанию <code>&quot;&quot;</code> (пустая строка);</div>
</li>
<li class="level1"><div class="li"> для кортежей значение по умолчанию <code>[]</code> (пустой кортеж).</div>
</li>
</ul>

</div>

<h2 class="sectionedit12" id="lokalnye_peremennye">Локальные переменные</h2>
<div class="level2">

<p>
В <strong>QSP</strong> есть возможность сделать переменные локальными, то есть их значения будут сохраняться в пределах определённого <em>блока кода</em>, например, только на определённой локации или в отдельном действии.
</p>

<p>
Чтобы объявить переменную локальной, нужно использовать ключевое слово <strong><code>LOCAL</code></strong>. В общем виде объявление локальной переменной выглядит так:
</p>

<p>
<pre class="brush: qsp">
LOCAL имя_переменной = [значение]
</pre>
</p>

<p>
Здесь <strong><code>имя_переменной</code></strong> — это имя переменной, которую мы объявляем, а <strong><code>[значение]</code></strong> — это любое значение, которое мы этой переменной присваиваем. Пример:
</p>

<p>
<pre class="brush: qsp">
! объявляем локальную переменную **tempora** со значением **12**
local tempora = 12
</pre>
</p>

<p>
Эта запись очень похожа на объявление переменной через оператор <strong><code>SET</code></strong>, и точно так же, как для оператора <strong><code>SET</code></strong>, для оператора <strong><code>LOCAL</code></strong> существует возможность объявить сразу несколько локальных переменных:
</p>

<p>
<pre class="brush: qsp">
! множественное объявление локальных переменных
local x, y, $item = 11, 19, &quot;Старый меч&quot;
</pre>
</p>

<p>
Как видите, сразу после оператора <strong><code>LOCAL</code></strong> через запятую перечислены имена объявляемых переменных, затем стоит знак равенства и после него перчислены значения, которые мы присваиваем этим переменным. Число переменных слева от знака <strong><code>=</code></strong> и число значений справа должны совпадать.
</p>

<p>
Однако, в отличие от оператора <strong><code>SET</code></strong> оператор <strong><code>LOCAL</code></strong> позволяет нам назначить локальные переменные без присвоения им значений. Для этого достаточно просто перечислить после оператора <strong><code>LOCAL</code></strong> через запятую названия переменных:
</p>

<p>
<pre class="brush: qsp">
local $название_предмета, количество, цена
</pre>
</p>

<p>
Здесь оператор <strong><code>LOCAL</code></strong> работает без операции присваивания. Локальные переменные создаются, но <strong><code>arrsize</code></strong> для них покажет <strong><code>0</code></strong>.
</p>

<p>
Собственные локальные переменные можно создавать для таких блоков кода как:
</p>
<ul>
<li class="level1"><div class="li"> Локации сами со себе.</div>
</li>
<li class="level1"><div class="li"> Код, передаваемый оператору <strong><code>DYNAMIC</code></strong> или функции <strong><code>DYNEVAL</code></strong> в виде текста.</div>
</li>
<li class="level1"><div class="li"> Код, выполняемый при нажатии на гиперссылку.</div>
</li>
<li class="level1"><div class="li"> Код каждого отдельного Действия (<strong><a href="/help:acts" class="wikilink1" title="help:acts">ACT</a></strong>).</div>
</li>
<li class="level1"><div class="li"> Код каждого отдельного Цикла (<strong><a href="/help:cycle" class="wikilink1" title="help:cycle">LOOP</a></strong>)</div>
</li>
</ul>

<p>
<strong>Внимание!</strong> У локальных переменных есть одна особенность, которую нужно очень чётко понимать. Значение объявленной в данном блоке кода локальной переменной транслируется и во все вложенные, или вызванные из данного, блоки кода. Например, если на локации объявлена локальная переменная, то её значение транслируется во все вызываемые с помощью <strong><code>GOSUB</code></strong> или <strong><code>FUNC</code></strong> локации, в блоки кода для <strong><code>DYNAMIC</code></strong>/<strong><code>DYNEVAL</code></strong>, в блоки циклов и так далее. Пример:
</p>

<p>
<pre class="brush: qsp">
# start
  ! из этой локации мы будем вызывать локацию foo
  i=99 &amp; ! объявляем глобальную переменную
  gosub &#039;foo&#039;
  *nl i &amp; ! на экране увидим число 99
- start -

# foo
  ! на этой локации объявляем локальную переменную
  local i=0
  ! локальная переменная транслируется в цикл
  loop while i&lt;10 step i+=1:
    ! в цикле мы вызываем локацию undo
    gosub &#039;undo&#039;
    ! и так же в цикле мы работаем с переменной,
    ! объявленной на локации foo
  end
  *nl i &amp; ! на экране увидим число 10
- foo -

# undo
  ! в эту локацию из цикла с локации foo
  ! транслируется всё та же локальная переменная
  ! объявленная на локации foo
  i+=1 &amp; ! увеличиваем значение переменной, влияя на значение в foo
  *p &#039;undo:&lt;&lt;i&gt;&gt;, &#039; &amp; ! на экране появятся числа 1,3,5,7,9 с припиской undo:
- undo -
</pre>
</p>

<p>
<strong>Однако!</strong> Значения локальных переменных не транслируются в действия (в отличие от значений массива <strong><code>ARGS</code></strong> на текущей локации):
</p>

<p>
<pre class="brush: qsp">
$args[0] = &#039;текущая локация&#039;
local $var = &#039;локальная переменная&#039;
*pl $args[0]
*pl $var
act &quot;Вывести значения&quot;:
  *pl $args[0]
  *pl $var
end
</pre>
</p>

<p>
<strong>Важно.</strong> Значения локальных переменных не передаются в локации-обработчики событий, однако передаются на локации-обработчики пунктов меню. Будьте внимательны.
</p>

</div>

<h3 class="sectionedit13" id="primery_naznachenija_lokalnyx_peremennyx">Примеры назначения локальных переменных</h3>
<div class="level3">

<p>
Две локации, на каждой из которых собственная переменная <strong><code>i</code></strong>:
</p>

<p>
<pre class="brush: qsp">
# локация 1
  if i=0: i=99 &amp; ! значение переменной i задаётся лишь раз
  *pl &quot;Глобальное i = &lt;&lt;i&gt;&gt;&quot;
  act &quot;На локацию 2&quot;: goto &#039;локация 2&#039;
- локация 1 -

# локация 2
  *pl &quot;Глобальное i = &lt;&lt;i&gt;&gt;&quot;
  local i=137 &amp; ! значение переменной i задаётся лишь раз
  *pl &quot;Локальное i = &lt;&lt;i&gt;&gt;&quot;
  act &quot;На локацию 1&quot;: goto &#039;локация 1&#039;
- локация 2 -
</pre>
</p>

<p>
Ещё пример с двумя локациями:
</p>

<p>
<pre class="brush: qsp">
! этот код последовательно выведет на экран числа 12, 549 и 99, 549
# start
  x=99
  z=4608
  gosub &#039;foo&#039;
  *pl x &amp; *pl z  &amp; ! на экран выведутся числа 99 и 549
- start -

# foo
  local x &amp; ! объявляем переменную x локальной для данной локации
  x=12  &amp; ! изменяем значение переменной x
  z=549
  *pl x &amp; *pl z  &amp; ! на экран выведутся числа 12 и 549
- foo -
</pre>
</p>

<p>
Пример объявления локальных переменных в коде для <strong><code>DYNEVAL</code></strong> и в цикле:
</p>

<p>
<pre class="brush: qsp">
$chkObjWord = {
  ! это код, записанный в виде текста в переменную $chkObjWord
  ! в локальную переменную $word записываем слово,
  ! по которому производим поиск
  local $word = $args[0]
  loop local i = 1 while no i &gt; countobj step i += 1:
    ! используем локальную переменную i внутри цикла
    ! цикл выполняется пока счётчик не превысит число предметов
    if instr($getobj(i), $word) &lt;&gt; 0:
      ! как только в названии очередного предмета
      ! встречается рассматриваемое слово
      result = i  &amp; ! возвращаем позицию
      exit  &amp; ! закрываем функцию
    end
  end
}
object_position = dyneval($chkObjWord, &#039;граната&#039;)
</pre>
</p>

<p>
Локальные переменные можно объявлять и внутри действий:
</p>

<p>
<pre class="brush: qsp">
i=99
act &quot;Действие с локальной i&quot;:
  local i = 449933
  *pl i
end
act &quot;Действие с глобальной i&quot;:
  *pl i
end
</pre>
</p>

<p>
<a href="/help:expressions" class="wikilink1" title="help:expressions">Вперёд: Выражения</a>
</p>

</div>

<script type='text/javascript'>
  SyntaxHighlighter.autoloader(
    'applescript /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushAppleScript.js',
    'actionscript3 as3 /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushAS3.js',
    'bash shell /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushBash.js',
    'coldfusion cf /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushColdFusion.js',
    'cpp c /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushCpp.js',
    'c# c-sharp csharp /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushCSharp.js',
    'css /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushCss.js',
    'delphi pascal /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushDelphi.js',
    'diff patch pas /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushDiff.js',
    'erl erlang /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushErlang.js',
    'groovy /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushGroovy.js',
    'java /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushJava.js',
    'jfx javafx /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushJavaFX.js',
    'js jscript javascript /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushJScript.js',
    'perl pl /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPerl.js',
    'php /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPhp.js',
    'text plain /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPlain.js',
    'ps powershell /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPowerShell.js',
    'py python /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPython.js',
    'ruby rails ror rb /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushRuby.js',
    'sass scss /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushSass.js',
    'scala /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushScala.js',
    'sql /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushSql.js',
    'vb vbnet /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushVb.js',
    'xml xhtml xslt html /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushXml.js',
    ' qsp /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushQsp.js'
  );
  SyntaxHighlighter.all();
</script>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>help/variables.txt</bdi> · Последние изменения: 2024/10/14 10:12  — <bdi>aleks_versus</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Инструменты страницы</h3>
                <div class="tools">
                    <ul>
                        <li><a href="/help:variables?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Показать исходный текст [V]"><span>Показать исходный текст</span></a></li><li><a href="/help:variables?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="История страницы [O]"><span>История страницы</span></a></li><li><a href="/help:variables?do=backlink"  class="action backlink" rel="nofollow" title="Ссылки сюда"><span>Ссылки сюда</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Наверх [T]"><span>Наверх</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
<a href="https://www.dokuwiki.org/ru:tips:good_style">Как писать хорошие вики-статьи</a>
<a href="https://www.dokuwiki.org/ru:wiki:syntax">Вики-синтаксис</a>
<a href="https://www.dokuwiki.org/ru:manual">Руководство пользователя</a>
<a href="/playground:playground">Песочница (для любого тестирования)</a>
<a href="/discussions">Обсуждения</a>
<!--
                <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="/lib/tpl/qspdokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://www.php.net" title="Powered by PHP" ><img
            src="/lib/tpl/qspdokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="https://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="/lib/tpl/qspdokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="https://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="/lib/tpl/qspdokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="/lib/tpl/qspdokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
-->
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="/lib/exe/indexer.php?id=help%3Avariables&amp;1757411623" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
